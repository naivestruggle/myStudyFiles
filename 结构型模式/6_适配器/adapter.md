# 1、适配器模式基本介绍

![1563259101623](images\现实生活中的例子.png)

- 理解为生活中的转接头（将安卓充电器转换成苹果充电器的转接头）
- 适配器模式**（Adapter Pattern)**将某个类的接口转换成客户端期望的另一个接口表示，主的目的是兼容性，让原本因接口不匹配不能一起工作的两个类可以协同工作。其别名为包装器**(Wrapper)**
- 适配器模式属于结构型模式
- 主要分为三类：**类适配器模式**、**对象适配器模式**、**接口适配器模式**。

# 2、适配器模式工作原理

- 适配器模式：将一个类的接口转换成另一种接口，让原本接口不兼容的类可以兼容

- 从用户的角度看不到被适配者，是解耦的。

- 用户调用适配器转化出来的目标接口方法，适配器再调用被适配者的相关接口方法。

- 用户收到反馈结果，感觉只是和目标接口交互，如图：

  ![1563258098905](images\适配器模式原理图.png)

# 3、类适配器模式

- 基本介绍：Adapter类，通过继承src类，实现dst类接口，完成src -> dst的适配。

- 类适配器模式应用实例

  - 以生活中充电器的例子来讲解适配器，充电器本身相当于Adapter，220V交流电相当于src（即被适配者），我们的目的dst（即目标）是5V直流电。

  - 思路分析图解

    ![1563261144524](images\类适配器解决问题思路分析图解.png)

  - 代码演示（src.classAdapter）

- 类适配器模式注意事项和细节

  - Java是单继承机制，所以类适配器需要继承src类这一点算是一个缺点，因为这要求dst必须是接口，有一定局限性；
  - src类的方法在Adapter中都会暴露出来，也增加了使用的成本。
  - 由于其继承了src类，所以它可以根据需求重写src类的方法，使得Adapter的灵活性增强了。



# 4、对象适配器（常用）

## 4.1、基本介绍

- 基本思路和类的适配器模式相同，只是将Adapter类作修改，不是继承src类，而是**持有src类的实例**，以解决兼容性的问题。即：持有src类，实现dst类接口，完成src->dst的适配
- 根据“合成复用原则”，在系统中尽量使用关联关系来替代继承关系。
- **对象适配器模式是适配器模式常用的一种**

## 4.2、使用对象适配器来改进前面的例子

- 类图

  ![1563263604900](images\对象适配器类图.png)

- 代码示例（src.objectAdapter）

- 注意事项和细节

  - 对象适配器和类适配器其实算是同一种思想，只不过实现方式不同。根据**合成复用原则**，使用组合替代继承，所以它**解决**了类适配器必须继承src的局限性问题，也不再要求dst必须是接口。
  - 使用成本更低，更灵活。

# 5、接口适配器模式

## 5.1、基本介绍

- 一些书籍称为：适配器模式（Default Adapter Pattern)或缺省适配器模式。
- 当不需要全部实现接口提供的方法时，可先设计一个抽象类实现接口，并为该接口中每个方法提供一个默认实现(空方法)，那么该抽象类的子类可有选择地覆盖父类的某些方法来实现需求
- 适用于一个接口不想使用其所有的方法的情况。

## 5.2、具体实现

- 类图

  ![1563265110231](images\接口适配器类图.png)

- 代码实例（src.interfaceAdapter）

# 6、适配器模式在SpringMVC框架应用的源码分析

HandlerAdapter

# 7、适配器模式的注意事项和细节

- 三种命名方式，是根据src是以怎样的形式给到Adapter(在Adapter里的形式)来命名的。
- 类适配器：以类给到，在Adapter里，就是将src当做类，继承
  对象适配器：以对象给到，在Adapter里，将src作为一个对象，持有
  接口适配器：以接口给到，在Adapter里，将src作为一个接口，实现
- Adapter模式最大的作用还是**将原本不兼容的接口融合在一起工作**。
- 实际开发中，实现起来不拘泥于我们讲解的三种经典形式