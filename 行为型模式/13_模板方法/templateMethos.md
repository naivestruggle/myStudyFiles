# 1、需求

豆浆制作问题：编写制作豆浆的程序

- 制作豆浆的流程 ：选材 ---> 添加配料 ---> 浸泡 ---> 放到豆浆机打碎
- 通过添加不同的配料，可以制作出不同口味的豆浆
- 选材、浸泡和放到豆浆机打碎这几个步骤对于制作每种口味的豆浆都一样（红豆、黄豆....）
- 请使用**模板方法模式**完成（说明：因为模板方法模式，比较简单，**很容易就想到这个方案**，因此直接使用，不再使用传统的方案来引出模板方法模式）

# 2、模板方法模式

## 2.1、基本介绍

- 模板方法模式（Template Method Pattern），又叫模板模式（Template Pattern），在一个抽象类公开定义了执行它的方法的模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。
- 简单说，**模板方法模式**定义一个操作中的算法的骨架，而将一些步骤延迟到子类中，使得子类可以不改变一个算法的结构，就可以重定义该算法的某些特定步骤
- 这种类型的设计模式属于行为型模式。

## 2.2、类图

![1563454120312](images\模板方法模式类图.png)

- 对原理类图的说明（模板方法模式的角色及职责）
  - AbstractClass抽象类，类中实现了模板方法，定义了算法的骨架，具体子类需要去实现，其他的抽象方法operation2,3,4
  - ConcreteClass实现抽象方法operation2,3,4,以完成算法中特点子类的步骤

# 3、模板方法模式解决豆浆制作问题

## 3.1、类图

![1563454520233](images\模板方法模式解决制作豆浆问题.png)

## 3.2、代码实现（src）

# 4、模板方法模式的钩子方法

- 在模板方法模式的父类中，我们可以定义一个方法，它默认不做任何事，子类可以视情况要不要覆盖它，该方法称为“钩子”。
- 还是用上面做豆浆的例子来讲解，比如，我们还希望制作纯豆浆，不添加任何的配料，请使用钩子方法对前面的模板方法进行改造

- 代码实现（src.improve）

# 5、模板方法模式在Spring框架应用的源码分析

- Spring中的refresh()就是模板方法

- 类图

  ![1563499750052](images\模板方法模式在Spring框架应用的源码分析.png)

